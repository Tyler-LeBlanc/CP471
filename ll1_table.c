#include <search.h>
#include <stdio.h>

#define MAX_RULES 305

typedef struct
{
    char *non_terminal;
    char *terminal;
    char *production;
} ParsingRule;

ParsingRule parsing_table[MAX_RULES] = {
    {"program", "f", "fdecls decs st_seq ."},
    {"fdecls", "f", "fdec fdecls_"},
    {"fdecls_", "int", "ε"},
    {"fdecls_", ";", "; fdec fdecls_"},
    {"fdecls_", "double", "ε"},
    {"fdec", "d", "def type fname ( params ) decs st_seq fed"},
    {"params", "t", "type var params_"},
    {"params_", ")", "ε"},
    {"params_", ",", ", type var params_"},
    {"fname", "i", "id"},
    {"decs", "d", "decl decs_"},
    {"decs_", "w", "ε"},
    {"decs_", "s", "ε"},
    {"decs_", "while", "ε"},
    {"decs_", "l", "ε"},
    {"decs_", "r", "ε"},
    {"decs_", "if", "ε"},
    {"decs_", "f", "ε"},
    {"decs_", "x", "ε"},
    {"decs_", ";", "ε"},
    {"decs_", "k", "ε"},
    {"decs_", "z", "ε"},
    {"decs_", "h", "ε"},
    {"decs_", "u", "ε"},
    {"decs_", "a", "ε"},
    {"decs_", "g", "ε"},
    {"decs_", "return", "ε"},
    {"decs_", "y", "ε"},
    {"decs_", "j", "ε"},
    {"decs_", "d", "ε"},
    {"decs_", "v", "ε"},
    {"decs_", "e", "ε"},
    {"decs_", "t", "ε"},
    {"decs_", "print", "ε"},
    {"decs_", "o", "ε"},
    {"decs_", "b", "ε"},
    {"decs_", "fed", "ε"},
    {"decs_", "q", "ε"},
    {"decs_", "n", "ε"},
    {"decs_", "i", "ε"},
    {"decs_", "m", "ε"},
    {"decs_", "p", "ε"},
    {"decs_", ".", "ε"},
    {"decs_", "c", "ε"},
    {"decl", "t", "type varlist"},
    {"type", "d", "double"},
    {"type", "i", "int"},
    {"varlist", "v", "var , varlist_"},
    {"varlist_", "w", "ε"},
    {"varlist_", "s", "ε"},
    {"varlist_", "while", "ε"},
    {"varlist_", "l", "ε"},
    {"varlist_", "r", "ε"},
    {"varlist_", "if", "ε"},
    {"varlist_", "f", "ε"},
    {"varlist_", "x", "ε"},
    {"varlist_", ";", "ε"},
    {"varlist_", "k", "ε"},
    {"varlist_", "z", "ε"},
    {"varlist_", "h", "ε"},
    {"varlist_", "u", "ε"},
    {"varlist_", "a", "ε"},
    {"varlist_", "g", "ε"},
    {"varlist_", "return", "ε"},
    {"varlist_", "y", "ε"},
    {"varlist_", "j", "ε"},
    {"varlist_", "d", "ε"},
    {"varlist_", "v", "ε"},
    {"varlist_", "e", "ε"},
    {"varlist_", "t", "ε"},
    {"varlist_", "print", "ε"},
    {"varlist_", "o", "ε"},
    {"varlist_", "b", "ε"},
    {"varlist_", "fed", "ε"},
    {"varlist_", "q", "ε"},
    {"varlist_", "n", "ε"},
    {"varlist_", "i", "ε"},
    {"varlist_", "m", "ε"},
    {"varlist_", "p", "ε"},
    {"varlist_", ".", "ε"},
    {"varlist_", "c", "ε"},
    {"varlist_", ",", ", var varlist_"},
    {"st_seq", "s", "statement ; st_seq"},
    {"statement", "w", "while bexpr do st_seq od"},
    {"statement", "else", "ε"},
    {"statement", "r", "return expr"},
    {"statement", "fi", "ε"},
    {"statement", ";", "ε"},
    {"statement", "v", "var = expr"},
    {"statement", "fed", "ε"},
    {"statement", "od", "ε"},
    {"statement", "i", "if bexpr then st_seq st_seq_ fi"},
    {"statement", "p", "print expr"},
    {"statement", ".", "ε"},
    {"st_seq_", "fi", "ε"},
    {"st_seq_", "e", "else st_seq"},
    {"expr", "t", "term expr_"},
    {"expr_", "else", "ε"},
    {"expr_", "==", "ε"},
    {"expr_", "fi", "ε"},
    {"expr_", "do", "ε"},
    {"expr_", ";", "ε"},
    {"expr_", "and", "ε"},
    {"expr_", "-", "- term expr_"},
    {"expr_", ">=", "ε"},
    {"expr_", ">", "ε"},
    {"expr_", "fed", "ε"},
    {"expr_", "od", "ε"},
    {"expr_", "then", "ε"},
    {"expr_", "<=", "ε"},
    {"expr_", "or", "ε"},
    {"expr_", "]", "ε"},
    {"expr_", "<", "ε"},
    {"expr_", "+", "+ term expr_"},
    {"expr_", ")", "ε"},
    {"expr_", ".", "ε"},
    {"expr_", ",", "ε"},
    {"expr_", "<>", "ε"},
    {"term", "f", "factor term_"},
    {"term_", "else", "ε"},
    {"term_", "==", "ε"},
    {"term_", "fi", "ε"},
    {"term_", "do", "ε"},
    {"term_", ";", "ε"},
    {"term_", "*", "* factor term_"},
    {"term_", "and", "ε"},
    {"term_", "-", "ε"},
    {"term_", ">=", "ε"},
    {"term_", ">", "ε"},
    {"term_", "/", "/ factor term_"},
    {"term_", "fed", "ε"},
    {"term_", "od", "ε"},
    {"term_", "then", "ε"},
    {"term_", "%", "% factor term_"},
    {"term_", "<=", "ε"},
    {"term_", "or", "ε"},
    {"term_", "]", "ε"},
    {"term_", "<", "ε"},
    {"term_", "+", "ε"},
    {"term_", ")", "ε"},
    {"term_", ".", "ε"},
    {"term_", ",", "ε"},
    {"term_", "<>", "ε"},
    {"exprseq", "e", "expr , exprseq_"},
    {"exprseq_", ")", "ε"},
    {"exprseq_", ",", ", expr exprseq_"},
    {"bexpr", "b", "bterm bexpr_"},
    {"bexpr_", "do", "ε"},
    {"bexpr_", "o", "or bfactor bterm_"},
    {"bexpr_", "then", "ε"},
    {"bexpr_", ")", "ε"},
    {"bterm", "b", "bfactor bterm_"},
    {"bterm_", "do", "ε"},
    {"bterm_", "a", "and bfactor bterm_"},
    {"bterm_", "then", "ε"},
    {"bterm_", "or", "ε"},
    {"bterm_", ")", "ε"},
    {"bfactor", "e", "expr comp expr"},
    {"bfactor", "n", "not bfactor"},
    {"bfactor", "(", "( bexpr )"},
    {"comp", ">", ">="},
    {"comp", "=", "=="},
    {"comp", "<", "<>"},
    {"var", "i", "id [ expr ]"},
    {"id", "l", "letter id_"},
    {"id_", "w", "ε"},
    {"id_", "s", "ε"},
    {"id_", "while", "ε"},
    {"id_", "else", "ε"},
    {"id_", "l", "ε"},
    {"id_", "r", "ε"},
    {"id_", "if", "ε"},
    {"id_", "[", "ε"},
    {"id_", "int", "ε"},
    {"id_", "fi", "ε"},
    {"id_", "f", "ε"},
    {"id_", "do", "ε"},
    {"id_", "x", "ε"},
    {"id_", ";", "ε"},
    {"id_", "*", "ε"},
    {"id_", "k", "ε"},
    {"id_", "z", "ε"},
    {"id_", "and", "ε"},
    {"id_", "h", "ε"},
    {"id_", "u", "ε"},
    {"id_", "a", "ε"},
    {"id_", "g", "ε"},
    {"id_", "-", "ε"},
    {"id_", ">=", "ε"},
    {"id_", "return", "ε"},
    {"id_", "y", "ε"},
    {"id_", "j", "ε"},
    {"id_", "d", "ε"},
    {"id_", "v", "ε"},
    {"id_", "e", "ε"},
    {"id_", "t", "ε"},
    {"id_", "print", "ε"},
    {"id_", "o", "ε"},
    {"id_", ">", "ε"},
    {"id_", "/", "ε"},
    {"id_", "=", "ε"},
    {"id_", "b", "ε"},
    {"id_", "fed", "ε"},
    {"id_", "od", "ε"},
    {"id_", "q", "ε"},
    {"id_", "n", "ε"},
    {"id_", "then", "ε"},
    {"id_", "%", "ε"},
    {"id_", "(", "ε"},
    {"id_", "<=", "ε"},
    {"id_", "i", "ε"},
    {"id_", "m", "ε"},
    {"id_", "or", "ε"},
    {"id_", "]", "ε"},
    {"id_", "<", "ε"},
    {"id_", "+", "ε"},
    {"id_", "double", "ε"},
    {"id_", "p", "ε"},
    {"id_", ")", "ε"},
    {"id_", ".", "ε"},
    {"id_", "c", "ε"},
    {"id_", ",", "ε"},
    {"id_", "<>", "ε"},
    {"number", "i", "integer"},
    {"number", "D", "Double"},
    {"Double", "i", "integer . integer"},
    {"integer", "d", "digit integer_"},
    {"integer_", "fi", "ε"},
    {"integer_", "do", "ε"},
    {"integer_", ";", "ε"},
    {"integer_", "*", "ε"},
    {"integer_", "and", "ε"},
    {"integer_", "-", "ε"},
    {"integer_", ">=", "ε"},
    {"integer_", "d", "digit integer_"},
    {"integer_", ">", "ε"},
    {"integer_", "/", "ε"},
    {"integer_", "fed", "ε"},
    {"integer_", "od", "ε"},
    {"integer_", "then", "ε"},
    {"integer_", "%", "ε"},
    {"integer_", "<=", "ε"},
    {"integer_", "or", "ε"},
    {"integer_", "]", "ε"},
    {"integer_", "<", "ε"},
    {"integer_", "+", "ε"},
    {"integer_", ")", "ε"},
    {"integer_", ".", "ε"},
    {"integer_", ",", "ε"},
    {"integer_", "<>", "ε"},
    {"factor", "f", "fname ( exprseq )"},
    {"factor", "v", "var"},
    {"factor", "n", "number"},
    {"factor", "(", "( expr )"},
    {"letter", "w", "w"},
    {"letter", "s", "s"},
    {"letter", "l", "l"},
    {"letter", "r", "r"},
    {"letter", "f", "f"},
    {"letter", "x", "x"},
    {"letter", "k", "k"},
    {"letter", "z", "z"},
    {"letter", "h", "h"},
    {"letter", "u", "u"},
    {"letter", "a", "a"},
    {"letter", "g", "g"},
    {"letter", "y", "y"},
    {"letter", "j", "j"},
    {"letter", "d", "d"},
    {"letter", "v", "v"},
    {"letter", "e", "e"},
    {"letter", "t", "t"},
    {"letter", "o", "o"},
    {"letter", "b", "b"},
    {"letter", "q", "q"},
    {"letter", "n", "n"},
    {"letter", "i", "i"},
    {"letter", "m", "m"},
    {"letter", "p", "p"},
    {"letter", "c", "c"},
    {"digit", "1", "1"},
    {"digit", "5", "5"},
    {"digit", "9", "9"},
    {"digit", "7", "7"},
    {"digit", "2", "2"},
    {"digit", "8", "8"},
    {"digit", "4", "4"},
    {"digit", "6", "6"},
    {"digit", "0", "0"},
    {"digit", "3", "3"},
    {"digits_", "d", "digits_"},
    {"exponent", "E", "E sign digit digits_"},
    {"exponent", "e", "e sign digit digits_"},
    {"sign", "1", "ε"},
    {"sign", "5", "ε"},
    {"sign", "9", "ε"},
    {"sign", "-", "-"},
    {"sign", "7", "ε"},
    {"sign", "2", "ε"},
    {"sign", "8", "ε"},
    {"sign", "4", "ε"},
    {"sign", "+", "+"},
    {"sign", "6", "ε"},
    {"sign", "0", "ε"},
    {"sign", "3", "ε"},
};

int main()
{
    printf("LL(1) Parsing Table Loaded. Use hash map lookup to access rules.\n");
    return 0;
}
